<div class="flex flex-col h-full rounded-xl bg-slate-900 p-4 shadow">
  <a [routerLink]="['/product', product().id]"
    class="text-sm text-emerald-400 hover:transition-opacity hover:text-emerald-300 hover:underline underline-offset-2 transition-colors ">

    <img class="mb-3 h-40 w-full rounded-lg object-cover" [src]="product().image" [alt]="product().title" />

    <h2 class="mb-1 text-sm font-semibold line-clamp-2">
      {{ product().title }}
    </h2>

    <p class="mb-3 text-xs text-slate-300 line-clamp-2">
      {{ product().description | shortDescriptionPipe:120}}
    </p>

    <p class="mb-3 text-xs font-medium text-slate-300 line-clamp-2 text-emerald-400">
      {{ product().price | currency}}
    </p>
  </a>
  @if (isLogged()) {
  <form [formGroup]="formItem" class="mt-auto flex flex-col gap-3">
    <div class="flex flex-1 items-center justify-between gap-3">
      <div class="flex items-center gap-2">
        <button type="button" class="flex h-8 w-8 items-center justify-center rounded-lg
                   bg-slate-800 text-slate-100 text-lg
                   hover:bg-slate-700 active:scale-95
                   border border-slate-700" (click)="decreaseCount()">
          -
        </button>

        <input type="number" min="1" formControlName="amount" class="w-16 text-center rounded-lg border border-slate-700
                   bg-slate-900 px-2 py-1 text-sm text-slate-50
                   focus:outline-none focus:ring-2 focus:ring-emerald-500" />

        <button type="button" class="flex h-8 w-8 items-center justify-center rounded-lg
                   bg-slate-800 text-slate-100 text-lg
                   hover:bg-slate-700 active:scale-95
                   border border-slate-700" (click)="increaseCount()">
          +
        </button>
      </div>

      <div class="flex items-center gap-2">
        <button type="button" class="inline-flex items-center justify-center rounded-lg
                   bg-emerald-600 px-3 py-1.5 text-sm font-medium gap-2
                   hover:bg-emerald-500 active:scale-[0.98]
                   transition-transform duration-150" (click)="onAdd()">
          <span class="material-symbols-outlined text-base">
            shopping_cart
          </span>
          AÃ±adir
        </button>
      </div>
    </div>
  </form>
  }
</div>